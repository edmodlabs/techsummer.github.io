









<!DOCTYPE html>
<html lang="en"
      data-is-home="false"
      data-is-mobile="false"
      data-supports-vr="false"
      data-supports-touch="false"
      data-site-base-url="https://techsummer.github.io"
      data-site-root-path="/"
      data-site-home-url="https://techsummer.github.io/"
      data-lib-home-url="https://techsummer.github.io"
      data-lib-examples-url="https://techsummer.github.io"
      data-title="{title} | TechSummer"
      data-is-spa="false"
      data-ga-id="UA-84499800-1"
      data-aframe-version="1.0.0"
      data-docs-version="master">
  <head>
    <title>Developing with three.js –  Docs  – TechSummer</title>
    

<script>
  var host = window.location.protocol + '//' + window.location.hostname;
  if (window.location.protocol === 'http:' &&
      window.location.hostname === 'https://techsummer.github.io') {
    window.location.href = 'https:' + window.location.href.substring(6);
  }
</script>


    <meta charset="utf-8">
    <meta name="robots" content="all">
    <meta name="description" content="TechSummer – TODO: subtitle">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

    <link rel="canonical" href="https://techsummer.github.io">
    <meta property="fb:app_id" content="1535794316743373">
    <meta property="og:title" content="TechSummer">
    <meta property="og:site_name" content="TechSummer">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://techsummer.github.io">
    <meta property="og:description" content="TODO: subtitle">
    <meta property="og:image" content="http://techsummer.github.io/images/card.png">
    <meta property="og:image:secure_url" content="https://techsummer.github.io/images/card.png">

    <meta name="twitter:card" content="summary">
    <meta name="twitter:site" content="@aframevr">
    <meta name="twitter:creator" content="@aframevr">
    <meta name="twitter:title" content="TechSummer">
    <meta name="twitter:description" content="TODO: subtitle">
    <meta name="twitter:image" content="https://techsummer.github.io/images/card.png">

    <meta name="mobile-web-app-capable" content="yes">
    <meta name="theme-color" content="black">
    <link rel="icon" sizes="192x192" href="https://techsummer.github.io/images/TechStart_Logo.png">

    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon" href="https://techsummer.github.io/images/TechStart_Logo.png">

    <link rel="alternate" type="application/rss+xml" title="Feed" href="https://techsummer.github.io/feed.xml">

    <script src="/js/compat.js"></script>

    
      <link rel="stylesheet" href="/css/secondary.css">
    

    
  
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-84499800-1', 'auto');
  ga('send', 'pageview');
</script>




<script type="text/javascript">
  !function(){var analytics=window.analytics=window.analytics||[];if(!analytics.initialize)if(analytics.invoked)window.console&&console.error&&console.error("Segment snippet included twice.");else{analytics.invoked=!0;analytics.methods=["trackSubmit","trackClick","trackLink","trackForm","pageview","identify","reset","group","track","ready","alias","debug","page","once","off","on"];analytics.factory=function(t){return function(){var e=Array.prototype.slice.call(arguments);e.unshift(t);analytics.push(e);return analytics}};for(var t=0;t<analytics.methods.length;t++){var e=analytics.methods[t];analytics[e]=analytics.factory(e)}analytics.load=function(t){var e=document.createElement("script");e.type="text/javascript";e.async=!0;e.src=("https:"===document.location.protocol?"https://":"http://")+"cdn.segment.com/analytics.js/v1/"+t+"/analytics.min.js";var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(e,n)};analytics.SNIPPET_VERSION="4.0.0";
  analytics.load("O0Trhcd2h1sVKasfJHP5JHVRZUJ8Nwev");
  analytics.page();
  }}();
</script>

  </head>
  <body data-page-layout="docs"
        data-page-type="introduction">
    
      <aside class="sidebar sidebar-mobile borderless-links c">
  <header id="header" class="header">
    <a href="#secondary-nav" class="mobile-nav-btn">Menu</a>
    <a id="logo" class="logo" href="/">
      <span class="logo__wordmark">TechSummer</span>
    </a>
  </header>
</aside>

    
    <main id="main" class="main">
      


<!-- Navigation. -->
<aside class="sidebar borderless-links">
  

<div id="secondary-nav" class="secondary-nav">
  <header id="header" class="header">
    <a id="logo" class="logo" href="/" title="TechSummer">
      <span class="logo__wordmark">TechSummer</span>
    </a>
  </header>

  <ul id="nav" class="nav">
    
      <li  class="nav-item">
        <a href="/docs/1.0.0/DIY/"
           class="nav-link nav-link-docs"
           
           >
          <span>PROJECT</span>
        </a>
      </li>
    
      <li  class="nav-item">
        <a href="/community/"
           class="nav-link nav-link-docs"
           
           >
          <span>RESOURCES</span>
        </a>
      </li>
    
      <li  data-slug="slug" class="nav-item">
        <a href="https://www.facebook.com/groups/techsummer"
           class="nav-link nav-link-docs"
            rel="external"
            title="FB Group">
          <span>FB Group</span>
        </a>
      </li>
    
      <li  class="nav-item">
        <a href="/faq/"
           class="nav-link nav-link-docs"
           
           >
          <span>FAQS</span>
        </a>
      </li>
    
  </ul>
</div>


  <div class="list">

      <!-- Version dropdown. (remove display:none) -->
      <label class="subnav-label" style = "display:none" for="docs-version"><b>Version</b></label>
      <select id="docs-version" style = "display:none" onchange="location = this.options[this.selectedIndex].getAttribute('data-href')">
        
          <option selected
                  data-href="/docs/master/introduction/">
            master
          </option>
        
          <option false
                  data-href="/docs/1.0.0/DIY/">
            1.0.0
          </option>
        
      </select>

    
      

      <!-- Section title. -->
      <h3 class="section-title docs-section-title section-title-active">
        <a href="/docs/master/introduction/"
           class="section-title-link section-title-link-active">
          Introduction
        </a>
      </h3>

      <!-- Section links. -->
      <ol class="subnav section-subnav">
        
          <li class="subnav-item ">
            <a href="/docs/master/introduction/"
               class="subnav-link">
              Introduction
            </a>
          </li>
        
          <li class="subnav-item ">
            <a href="/docs/master/introduction/installation.html"
               class="subnav-link">
              Installation
            </a>
          </li>
        
          <li class="subnav-item ">
            <a href="/docs/master/introduction/vr-headsets-and-webvr-browsers.html"
               class="subnav-link">
              VR Headsets &amp; WebVR Browsers
            </a>
          </li>
        
          <li class="subnav-item ">
            <a href="/docs/master/introduction/html-and-primitives.html"
               class="subnav-link">
              HTML &amp; Primitives
            </a>
          </li>
        
          <li class="subnav-item ">
            <a href="/docs/master/introduction/entity-component-system.html"
               class="subnav-link">
              Entity-Component-System
            </a>
          </li>
        
          <li class="subnav-item ">
            <a href="/docs/master/introduction/javascript-events-dom-apis.html"
               class="subnav-link">
              JavaScript, Events, DOM APIs
            </a>
          </li>
        
          <li class="subnav-item  subnav-item-current">
            <a href="/docs/master/introduction/developing-with-threejs.html"
               class="subnav-link current">
              Developing with three.js
            </a>
          </li>
        
          <li class="subnav-item ">
            <a href="/docs/master/introduction/writing-a-component.html"
               class="subnav-link">
              Writing a Component
            </a>
          </li>
        
          <li class="subnav-item ">
            <a href="/docs/master/introduction/interactions-and-controllers.html"
               class="subnav-link">
              Interactions &amp; Controllers
            </a>
          </li>
        
          <li class="subnav-item ">
            <a href="/docs/master/introduction/models.html"
               class="subnav-link">
              3D Models
            </a>
          </li>
        
          <li class="subnav-item ">
            <a href="/docs/master/introduction/visual-inspector-and-dev-tools.html"
               class="subnav-link">
              Visual Inspector &amp; Dev Tools
            </a>
          </li>
        
          <li class="subnav-item ">
            <a href="/docs/master/introduction/hosting-and-publishing.html"
               class="subnav-link">
              Hosting &amp; Publishing
            </a>
          </li>
        
          <li class="subnav-item ">
            <a href="/docs/master/introduction/best-practices.html"
               class="subnav-link">
              Best Practices
            </a>
          </li>
        
          <li class="subnav-item ">
            <a href="/docs/master/introduction/faq.html"
               class="subnav-link">
              FAQ
            </a>
          </li>
        
      </ol>
    
      

      <!-- Section title. -->
      <h3 class="section-title docs-section-title section-title-inactive">
        <a href="/docs/master/guides/"
           class="section-title-link section-title-link-inactive">
          Guides
        </a>
      </h3>

      <!-- Section links. -->
      <ol class="subnav section-subnav">
        
          <li class="subnav-item ">
            <a href="/docs/master/guides/building-a-basic-scene.html"
               class="subnav-link">
              Building a Basic Scene
            </a>
          </li>
        
          <li class="subnav-item ">
            <a href="/docs/master/guides/building-a-360-image-gallery.html"
               class="subnav-link">
              Building a 360&amp;deg; Image Gallery
            </a>
          </li>
        
          <li class="subnav-item ">
            <a href="/docs/master/guides/building-with-magicavoxel.html"
               class="subnav-link">
              Building with MagicaVoxel
            </a>
          </li>
        
          <li class="subnav-item ">
            <a href="/docs/master/guides/building-a-minecraft-demo.html"
               class="subnav-link">
              Building a Minecraft Demo
            </a>
          </li>
        
      </ol>
    
      

      <!-- Section title. -->
      <h3 class="section-title docs-section-title section-title-inactive">
        <a href="/docs/master/core/"
           class="section-title-link section-title-link-inactive">
          Core API
        </a>
      </h3>

      <!-- Section links. -->
      <ol class="subnav section-subnav">
        
          <li class="subnav-item ">
            <a href="/docs/master/core/entity.html"
               class="subnav-link">
              Entity
            </a>
          </li>
        
          <li class="subnav-item ">
            <a href="/docs/master/core/component.html"
               class="subnav-link">
              Component
            </a>
          </li>
        
          <li class="subnav-item ">
            <a href="/docs/master/core/systems.html"
               class="subnav-link">
              System
            </a>
          </li>
        
          <li class="subnav-item ">
            <a href="/docs/master/core/scene.html"
               class="subnav-link">
              Scene
            </a>
          </li>
        
          <li class="subnav-item ">
            <a href="/docs/master/core/animations.html"
               class="subnav-link">
              Animations
            </a>
          </li>
        
          <li class="subnav-item ">
            <a href="/docs/master/core/mixins.html"
               class="subnav-link">
              Mixins
            </a>
          </li>
        
          <li class="subnav-item ">
            <a href="/docs/master/core/asset-management-system.html"
               class="subnav-link">
              Asset Management System
            </a>
          </li>
        
          <li class="subnav-item ">
            <a href="/docs/master/core/globals.html"
               class="subnav-link">
              Globals
            </a>
          </li>
        
          <li class="subnav-item ">
            <a href="/docs/master/core/utils.html"
               class="subnav-link">
              Utils
            </a>
          </li>
        
      </ol>
    
      

      <!-- Section title. -->
      <h3 class="section-title docs-section-title section-title-inactive">
        <a href="/docs/master/components/"
           class="section-title-link section-title-link-inactive">
          Components
        </a>
      </h3>

      <!-- Section links. -->
      <ol class="subnav section-subnav">
        
          <li class="subnav-item ">
            <a href="/docs/master/components/blend-model.html"
               class="subnav-link">
              blend-model
            </a>
          </li>
        
          <li class="subnav-item ">
            <a href="/docs/master/components/camera.html"
               class="subnav-link">
              camera
            </a>
          </li>
        
          <li class="subnav-item ">
            <a href="/docs/master/components/collada-model.html"
               class="subnav-link">
              collada-model
            </a>
          </li>
        
          <li class="subnav-item ">
            <a href="/docs/master/components/cursor.html"
               class="subnav-link">
              cursor
            </a>
          </li>
        
          <li class="subnav-item ">
            <a href="/docs/master/components/daydream-controls.html"
               class="subnav-link">
              daydream-controls
            </a>
          </li>
        
          <li class="subnav-item ">
            <a href="/docs/master/components/debug.html"
               class="subnav-link">
              debug
            </a>
          </li>
        
          <li class="subnav-item ">
            <a href="/docs/master/components/embedded.html"
               class="subnav-link">
              embedded
            </a>
          </li>
        
          <li class="subnav-item ">
            <a href="/docs/master/components/fog.html"
               class="subnav-link">
              fog
            </a>
          </li>
        
          <li class="subnav-item ">
            <a href="/docs/master/components/gearvr-controls.html"
               class="subnav-link">
              gearvr-controls
            </a>
          </li>
        
          <li class="subnav-item ">
            <a href="/docs/master/components/geometry.html"
               class="subnav-link">
              geometry
            </a>
          </li>
        
          <li class="subnav-item ">
            <a href="/docs/master/components/gltf-model.html"
               class="subnav-link">
              gltf-model
            </a>
          </li>
        
          <li class="subnav-item ">
            <a href="/docs/master/components/hand-controls.html"
               class="subnav-link">
              hand-controls
            </a>
          </li>
        
          <li class="subnav-item ">
            <a href="/docs/master/components/keyboard-shortcuts.html"
               class="subnav-link">
              keyboard-shortcuts
            </a>
          </li>
        
          <li class="subnav-item ">
            <a href="/docs/master/components/laser-controls.html"
               class="subnav-link">
              laser-controls
            </a>
          </li>
        
          <li class="subnav-item ">
            <a href="/docs/master/components/light.html"
               class="subnav-link">
              light
            </a>
          </li>
        
          <li class="subnav-item ">
            <a href="/docs/master/components/line.html"
               class="subnav-link">
              line
            </a>
          </li>
        
          <li class="subnav-item ">
            <a href="/docs/master/components/look-controls.html"
               class="subnav-link">
              look-controls
            </a>
          </li>
        
          <li class="subnav-item ">
            <a href="/docs/master/components/material.html"
               class="subnav-link">
              material
            </a>
          </li>
        
          <li class="subnav-item ">
            <a href="/docs/master/components/obj-model.html"
               class="subnav-link">
              obj-model
            </a>
          </li>
        
          <li class="subnav-item ">
            <a href="/docs/master/components/oculus-touch-controls.html"
               class="subnav-link">
              oculus-touch-controls
            </a>
          </li>
        
          <li class="subnav-item ">
            <a href="/docs/master/components/pool.html"
               class="subnav-link">
              pool
            </a>
          </li>
        
          <li class="subnav-item ">
            <a href="/docs/master/components/position.html"
               class="subnav-link">
              position
            </a>
          </li>
        
          <li class="subnav-item ">
            <a href="/docs/master/components/raycaster.html"
               class="subnav-link">
              raycaster
            </a>
          </li>
        
          <li class="subnav-item ">
            <a href="/docs/master/components/rotation.html"
               class="subnav-link">
              rotation
            </a>
          </li>
        
          <li class="subnav-item ">
            <a href="/docs/master/components/scale.html"
               class="subnav-link">
              scale
            </a>
          </li>
        
          <li class="subnav-item ">
            <a href="/docs/master/components/screenshot.html"
               class="subnav-link">
              screenshot
            </a>
          </li>
        
          <li class="subnav-item ">
            <a href="/docs/master/components/shadow.html"
               class="subnav-link">
              shadow
            </a>
          </li>
        
          <li class="subnav-item ">
            <a href="/docs/master/components/sound.html"
               class="subnav-link">
              sound
            </a>
          </li>
        
          <li class="subnav-item ">
            <a href="/docs/master/components/stats.html"
               class="subnav-link">
              stats
            </a>
          </li>
        
          <li class="subnav-item ">
            <a href="/docs/master/components/text.html"
               class="subnav-link">
              text
            </a>
          </li>
        
          <li class="subnav-item ">
            <a href="/docs/master/components/tracked-controls.html"
               class="subnav-link">
              tracked-controls
            </a>
          </li>
        
          <li class="subnav-item ">
            <a href="/docs/master/components/visible.html"
               class="subnav-link">
              visible
            </a>
          </li>
        
          <li class="subnav-item ">
            <a href="/docs/master/components/vive-controls.html"
               class="subnav-link">
              vive-controls
            </a>
          </li>
        
          <li class="subnav-item ">
            <a href="/docs/master/components/vr-mode-ui.html"
               class="subnav-link">
              vr-mode-ui
            </a>
          </li>
        
          <li class="subnav-item ">
            <a href="/docs/master/components/wasd-controls.html"
               class="subnav-link">
              wasd-controls
            </a>
          </li>
        
      </ol>
    
      

      <!-- Section title. -->
      <h3 class="section-title docs-section-title section-title-inactive">
        <a href="/docs/master/primitives/"
           class="section-title-link section-title-link-inactive">
          Primitives
        </a>
      </h3>

      <!-- Section links. -->
      <ol class="subnav section-subnav">
        
          <li class="subnav-item ">
            <a href="/docs/master/primitives/a-box.html"
               class="subnav-link">
              &lt;a-box&gt;
            </a>
          </li>
        
          <li class="subnav-item ">
            <a href="/docs/master/primitives/a-camera.html"
               class="subnav-link">
              &lt;a-camera&gt;
            </a>
          </li>
        
          <li class="subnav-item ">
            <a href="/docs/master/primitives/a-circle.html"
               class="subnav-link">
              &lt;a-circle&gt;
            </a>
          </li>
        
          <li class="subnav-item ">
            <a href="/docs/master/primitives/a-collada-model.html"
               class="subnav-link">
              &lt;a-collada-model&gt;
            </a>
          </li>
        
          <li class="subnav-item ">
            <a href="/docs/master/primitives/a-cone.html"
               class="subnav-link">
              &lt;a-cone&gt;
            </a>
          </li>
        
          <li class="subnav-item ">
            <a href="/docs/master/primitives/a-cursor.html"
               class="subnav-link">
              &lt;a-cursor&gt;
            </a>
          </li>
        
          <li class="subnav-item ">
            <a href="/docs/master/primitives/a-curvedimage.html"
               class="subnav-link">
              &lt;a-curvedimage&gt;
            </a>
          </li>
        
          <li class="subnav-item ">
            <a href="/docs/master/primitives/a-cylinder.html"
               class="subnav-link">
              &lt;a-cylinder&gt;
            </a>
          </li>
        
          <li class="subnav-item ">
            <a href="/docs/master/primitives/a-dodecahedron.html"
               class="subnav-link">
              &lt;a-dodecahedron&gt;
            </a>
          </li>
        
          <li class="subnav-item ">
            <a href="/docs/master/primitives/a-gltf-model.html"
               class="subnav-link">
              &lt;a-gltf-model&gt;
            </a>
          </li>
        
          <li class="subnav-item ">
            <a href="/docs/master/primitives/a-icosahedron.html"
               class="subnav-link">
              &lt;a-icosahedron&gt;
            </a>
          </li>
        
          <li class="subnav-item ">
            <a href="/docs/master/primitives/a-image.html"
               class="subnav-link">
              &lt;a-image&gt;
            </a>
          </li>
        
          <li class="subnav-item ">
            <a href="/docs/master/primitives/a-light.html"
               class="subnav-link">
              &lt;a-light&gt;
            </a>
          </li>
        
          <li class="subnav-item ">
            <a href="/docs/master/primitives/a-obj-model.html"
               class="subnav-link">
              &lt;a-obj-model&gt;
            </a>
          </li>
        
          <li class="subnav-item ">
            <a href="/docs/master/primitives/a-octahedron.html"
               class="subnav-link">
              &lt;a-octahedron&gt;
            </a>
          </li>
        
          <li class="subnav-item ">
            <a href="/docs/master/primitives/a-plane.html"
               class="subnav-link">
              &lt;a-plane&gt;
            </a>
          </li>
        
          <li class="subnav-item ">
            <a href="/docs/master/primitives/a-ring.html"
               class="subnav-link">
              &lt;a-ring&gt;
            </a>
          </li>
        
          <li class="subnav-item ">
            <a href="/docs/master/primitives/a-sky.html"
               class="subnav-link">
              &lt;a-sky&gt;
            </a>
          </li>
        
          <li class="subnav-item ">
            <a href="/docs/master/primitives/a-sound.html"
               class="subnav-link">
              &lt;a-sound&gt;
            </a>
          </li>
        
          <li class="subnav-item ">
            <a href="/docs/master/primitives/a-sphere.html"
               class="subnav-link">
              &lt;a-sphere&gt;
            </a>
          </li>
        
          <li class="subnav-item ">
            <a href="/docs/master/primitives/a-tetrahedron.html"
               class="subnav-link">
              &lt;a-tetrahedron&gt;
            </a>
          </li>
        
          <li class="subnav-item ">
            <a href="/docs/master/primitives/a-text.html"
               class="subnav-link">
              &lt;a-text&gt;
            </a>
          </li>
        
          <li class="subnav-item ">
            <a href="/docs/master/primitives/a-torus-knot.html"
               class="subnav-link">
              &lt;a-torus-knot&gt;
            </a>
          </li>
        
          <li class="subnav-item ">
            <a href="/docs/master/primitives/a-torus.html"
               class="subnav-link">
              &lt;a-torus&gt;
            </a>
          </li>
        
          <li class="subnav-item ">
            <a href="/docs/master/primitives/a-triangle.html"
               class="subnav-link">
              &lt;a-triangle&gt;
            </a>
          </li>
        
          <li class="subnav-item ">
            <a href="/docs/master/primitives/a-video.html"
               class="subnav-link">
              &lt;a-video&gt;
            </a>
          </li>
        
          <li class="subnav-item ">
            <a href="/docs/master/primitives/a-videosphere.html"
               class="subnav-link">
              &lt;a-videosphere&gt;
            </a>
          </li>
        
      </ol>
    
  </div>
</aside>

<!-- Documentation. -->
<div class="content content--structured content--introduction copy">
  <div class="copy__wrap">
    <p class="page__section">
      <a href="/docs/master/introduction/" class="borderless-link">
        master &rsaquo; Introduction
      </a>
    </p>
    
      <blockquote>
<p><strong>Note:</strong> The <code>master</code> version of the documentation tracks unstable development happening.</p>
</blockquote>

    
    <h1 class="page__title">Developing with three.js</h1>

    
    
      <p>Being a framework based on <a href="http://threejs.org" target="_blank" rel="external">three.js</a>, A-Frame provides full access to the
three.js API. We’ll go over how to access the underlying three.js scene,
objects, and API that lay underneath A-Frame.</p>

      


  <h2>Table of Contents</h2>

  <ul id="toc">
    
      <li>
        <a href="#relationship-between-a-frame-and-three-js-scene-graphs">Relationship Between A-Frame and three.js Scene Graphs</a>

        <!-- Nested. -->
        
          <ul>
            
              <li><a href="#parent-child-relationships">Parent-Child Relationships</a></li>
            
          </ul>
        
      </li>
    
      <li>
        <a href="#accessing-the-three-js-api">Accessing the three.js API</a>

        <!-- Nested. -->
        
          <ul>
            
          </ul>
        
      </li>
    
      <li>
        <a href="#working-with-three-js-objects">Working With three.js Objects</a>

        <!-- Nested. -->
        
          <ul>
            
              <li><a href="#accessing-the-three-js-scene">Accessing the three.js Scene</a></li>
            
              <li><a href="#accessing-an-entity’s-three-js-objects">Accessing an Entity’s three.js Objects</a></li>
            
              <li><a href="#setting-an-object3d-on-an-entity">Setting an Object3D on an Entity</a></li>
            
              <li><a href="#removing-an-object3d-from-an-entity">Removing an Object3D From an Entity</a></li>
            
          </ul>
        
      </li>
    
      <li>
        <a href="#transforming-between-coordinate-spaces">Transforming Between Coordinate Spaces</a>

        <!-- Nested. -->
        
          <ul>
            
              <li><a href="#local-to-world-transforms">Local to World Transforms</a></li>
            
              <li><a href="#world-to-local-transforms">World to Local Transforms</a></li>
            
          </ul>
        
      </li>
    
  </ul>


      
<h2 id="relationship-between-a-frame-and-three-js-scene-graphs"><a href="#relationship-between-a-frame-and-three-js-scene-graphs" class="headerlink" title="Relationship Between A-Frame and three.js Scene Graphs"></a>Relationship Between A-Frame and three.js Scene Graphs</h2><ul>
<li>A-Frame’s <code>&lt;a-scene&gt;</code> maps one-to-one with a three.js scene.</li>
<li>A-Frame’s <code>&lt;a-entity&gt;</code> maps to one or more three.js objects.</li>
<li>three.js’s objects have a reference to their A-Frame entity via <code>.el</code>, which is
set by A-Frame.</li>
</ul>
<h3 id="parent-child-relationships"><a href="#parent-child-relationships" class="headerlink" title="Parent-Child Relationships"></a>Parent-Child Relationships</h3><p>When A-Frame entities are nested in parent-child relationships, so are their
three.js objects. For example, take this A-Frame scene:</p>
<figure class="highlight html"><table><tr><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">a-scene</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">a-box</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">a-sphere</span>&gt;</span><span class="tag">&lt;/<span class="name">a-sphere</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">a-light</span>&gt;</span><span class="tag">&lt;/<span class="name">a-light</span>&gt;</span></div><div class="line">  <span class="tag">&lt;/<span class="name">a-box</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">a-scene</span>&gt;</span></div></pre></td></tr></table></figure>
<p>The three.js scene graph will correspond and look like:</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">THREE.Scene</div><div class="line">  THREE.Mesh</div><div class="line">    THREE.Mesh</div><div class="line">    THREE.Light</div></pre></td></tr></table></figure>
<h2 id="accessing-the-three-js-api"><a href="#accessing-the-three-js-api" class="headerlink" title="Accessing the three.js API"></a>Accessing the three.js API</h2><p>three.js is available as a global object on the window:</p>
<figure class="highlight js"><table><tr><td class="code"><pre><div class="line"><span class="built_in">console</span>.log(THREE);</div></pre></td></tr></table></figure>
<h2 id="working-with-three-js-objects"><a href="#working-with-three-js-objects" class="headerlink" title="Working With three.js Objects"></a>Working With three.js Objects</h2><p>A-Frame is an abstraction on top of three.js, but we still operate with
three.js underneath. A-Frame’s elements have doors that lead to three.js’s
scene graph.</p>
<h3 id="accessing-the-three-js-scene"><a href="#accessing-the-three-js-scene" class="headerlink" title="Accessing the three.js Scene"></a>Accessing the three.js Scene</h3><p>The <a href="https://threejs.org/docs/#Reference/Scenes/Scene" target="_blank" rel="external">three.js scene</a> is accessible from the <code>&lt;a-scene&gt;</code> element as <code>.object3D</code>:</p>
<figure class="highlight js"><table><tr><td class="code"><pre><div class="line"><span class="built_in">document</span>.querySelector(<span class="string">'a-scene'</span>).object3D;  <span class="comment">// THREE.Scene</span></div></pre></td></tr></table></figure>
<p>And every A-Frame entity also has a reference to <code>&lt;a-scene&gt;</code> via <code>.sceneEl</code>:</p>
<figure class="highlight js"><table><tr><td class="code"><pre><div class="line"><span class="built_in">document</span>.querySelector(<span class="string">'a-entity'</span>).sceneEl.object3D;  <span class="comment">// THREE.Scene</span></div></pre></td></tr></table></figure>
<p>From a <a href="../core/component.html">component</a>, we access the scene through its entity
(i.e., <code>this.el</code>):</p>
<figure class="highlight js"><table><tr><td class="code"><pre><div class="line">AFRAME.registerComponent(<span class="string">'foo'</span>, &#123;</div><div class="line">  <span class="attr">init</span>: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="keyword">var</span> scene = <span class="keyword">this</span>.el.sceneEl.object3D;  <span class="comment">// THREE.Scene</span></div><div class="line">  &#125;</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<h3 id="accessing-an-entity’s-three-js-objects"><a href="#accessing-an-entity’s-three-js-objects" class="headerlink" title="Accessing an Entity’s three.js Objects"></a>Accessing an Entity’s three.js Objects</h3><p>Every A-Frame entity (e.g., <code>&lt;a-entity&gt;</code>) has its own
<a href="https://threejs.org/docs/#api/core/Object3D" target="_blank" rel="external"><code>THREE.Object3D</code></a>, more specifically a <a href="https://threejs.org/docs/#Reference/Objects/Group" target="_blank" rel="external"><code>THREE.Group</code></a> that
contains different types of <code>Object3D</code>s. The root <code>THREE.Group</code> of an entity is
accessed via <code>.object3D</code>:</p>
<figure class="highlight js"><table><tr><td class="code"><pre><div class="line"><span class="built_in">document</span>.querySelector(<span class="string">'a-entity'</span>).object3D;  <span class="comment">// THREE.Group</span></div></pre></td></tr></table></figure>
<p>Entities can be composed of multiple types of <code>Object3D</code>s. For example,
an entity can be both a <code>THREE.Mesh</code> and a <code>THREE.Light</code> by having both
a geometry component and light component:</p>
<figure class="highlight html"><table><tr><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">a-entity</span> <span class="attr">geometry</span> <span class="attr">light</span>&gt;</span><span class="tag">&lt;/<span class="name">a-entity</span>&gt;</span></div></pre></td></tr></table></figure>
<p>Components add the mesh and light under the entity’s root <code>THREE.Group</code>.
References to the mesh and light are stored as different types of three.js
objects in the entity’s <code>.object3DMap</code>.</p>
<figure class="highlight js"><table><tr><td class="code"><pre><div class="line"><span class="built_in">console</span>.log(entityEl.object3DMap);</div><div class="line"><span class="comment">// &#123;mesh: THREE.Mesh, light: THREE.Light&#125;</span></div></pre></td></tr></table></figure>
<p>But we can access them through the entity’s <code>.getObject3D(name)</code> method:</p>
<figure class="highlight js"><table><tr><td class="code"><pre><div class="line">entityEl.getObject3D(<span class="string">'mesh'</span>);  <span class="comment">// THREE.Mesh</span></div><div class="line">entityEl.getObject3D(<span class="string">'light'</span>);  <span class="comment">// THREE.Mesh</span></div></pre></td></tr></table></figure>
<p>Now let’s see how these three.js objects were set in the first place.</p>
<h3 id="setting-an-object3d-on-an-entity"><a href="#setting-an-object3d-on-an-entity" class="headerlink" title="Setting an Object3D on an Entity"></a>Setting an <code>Object3D</code> on an Entity</h3><p>Setting an <code>Object3D</code> on an entity adds the <code>Object3D</code> to the entity’s <code>Group</code>,
which makes the newly set <code>Object3D</code> part of the three.js scene. We set the
<code>Object3D</code> with the entity’s <code>.setObject3D(name)</code> method where the name
denotes the <code>Object3D</code>s purpose.</p>
<p>For example, to set a point light from within a component:</p>
<figure class="highlight js"><table><tr><td class="code"><pre><div class="line">AFRAME.registerComponent(<span class="string">'pointlight'</span>, &#123;</div><div class="line">  <span class="attr">init</span>: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="keyword">this</span>.el.setObject3D(<span class="string">'light'</span>, <span class="keyword">new</span> THREE.PointLight());</div><div class="line">  &#125;</div><div class="line">&#125;);</div><div class="line"><span class="comment">// &lt;a-entity light&gt;&lt;/a-entity&gt;</span></div></pre></td></tr></table></figure>
<p>We set the light with the name <code>light</code>. To later access it, we can use the
entity’s <code>.getObject3D(name)</code> method as described before:</p>
<figure class="highlight js"><table><tr><td class="code"><pre><div class="line">entityEl.getObject3D(<span class="string">'light'</span>);</div></pre></td></tr></table></figure>
<p>And when we set a three.js object on an A-Frame entity, A-Frame will set a
reference to the A-Frame entity from the three.js object via <code>.el</code>:</p>
<figure class="highlight js"><table><tr><td class="code"><pre><div class="line">entityEl.getObject3D(<span class="string">'light'</span>).el;  <span class="comment">// entityEl</span></div></pre></td></tr></table></figure>
<p>There’s also a <code>.getOrCreateObject3D(name, constructor)</code> method for creating
and setting an <code>Object3D</code> if one has not been set with the name. This is
commonly used in the case of <code>THREE.Mesh</code> when both the geometry and material
components need to get or create a mesh. Whichever component gets initialized
first creates the mesh, then the other component gets the mesh.</p>
<h3 id="removing-an-object3d-from-an-entity"><a href="#removing-an-object3d-from-an-entity" class="headerlink" title="Removing an Object3D From an Entity"></a>Removing an <code>Object3D</code> From an Entity</h3><p>To remove an <code>Object3D</code> from an entity, and consequently the three.js scene, we
can use the entity’s <code>.removeObject3D(name)</code> method. Going back to our example
with the point light, we remove the light when the component is detached:</p>
<figure class="highlight js"><table><tr><td class="code"><pre><div class="line">AFRAME.registerComponent(<span class="string">'pointlight'</span>, &#123;</div><div class="line">  <span class="attr">init</span>: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="keyword">this</span>.el.setObject3D(<span class="string">'light'</span>, <span class="keyword">new</span> THREE.PointLight());</div><div class="line">  &#125;,</div><div class="line"></div><div class="line">  <span class="attr">remove</span>: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="comment">// Remove Object3D.</span></div><div class="line">    <span class="keyword">this</span>.el.removeObject3D(<span class="string">'light'</span>);</div><div class="line">  &#125;</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<h2 id="transforming-between-coordinate-spaces"><a href="#transforming-between-coordinate-spaces" class="headerlink" title="Transforming Between Coordinate Spaces"></a>Transforming Between Coordinate Spaces</h2><p>Every object and the scene (world) in general has their own coordinate space. A
parent object’s position, rotation, and scale transformations are applied to
its children’s position, rotation, and scale transformations. Consider this scene:</p>
<figure class="highlight html"><table><tr><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">a-entity</span> <span class="attr">id</span>=<span class="string">"foo"</span> <span class="attr">position</span>=<span class="string">"1 2 3"</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">a-entity</span> <span class="attr">id</span>=<span class="string">"bar"</span> <span class="attr">position</span>=<span class="string">"2 3 4"</span>&gt;</span><span class="tag">&lt;/<span class="name">a-entity</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">a-entity</span>&gt;</span></div></pre></td></tr></table></figure>
<p>From the world’s reference point, foo has position (1,2,3) and bar has position
(3, 5, 7) since foo’s transformations apply onto bar’s. From foo’s reference
point, foo has position (0, 0, 0) and bar has position (2, 3, 4).</p>
<p>Often we will want to transform between these reference points and coordinate
spaces. Above was a simple example, but we might want to do operations such as
finding the world-space coordinate of bar’s position, or translate an arbitrary
coordinate into foo’s coordinate space. In 3D programming, these operations are
accomplished with matrices, but three.js provides helpers to make them easier.</p>
<h3 id="local-to-world-transforms"><a href="#local-to-world-transforms" class="headerlink" title="Local to World Transforms"></a>Local to World Transforms</h3><p>Normally, we’d need to call <code>.updateMatrixWorld ()</code> on parent <code>Object3D</code>s, but
three.js defaults <code>Object3D.matrixAutoUpdate</code> to <code>true</code>. We can use three.js’s
<code>.getWorldPosition ()</code> and <code>.getWorldRotation ()</code>.</p>
<p>To get the world position of an <code>Object3D</code>:</p>
<figure class="highlight js"><table><tr><td class="code"><pre><div class="line">entityEl.object3D.getWorldPosition();</div></pre></td></tr></table></figure>
<p>To get the world rotation of an <code>Object3D</code>:</p>
<figure class="highlight js"><table><tr><td class="code"><pre><div class="line">entityEl.object3D.getWorldRotation();</div></pre></td></tr></table></figure>
<p>three.js <code>Object3D</code> has <a href="https://threejs.org/docs/#api/core/Object3D" target="_blank" rel="external">more functions available for local-to-world transforms</a>:</p>
<ul>
<li><code>.localToWorld (vector)</code></li>
<li><code>.getWorldDirection ()</code></li>
<li><code>.getWorldQuaternion ()</code></li>
<li><code>.getWorldScale ()</code></li>
</ul>
<h3 id="world-to-local-transforms"><a href="#world-to-local-transforms" class="headerlink" title="World to Local Transforms"></a>World to Local Transforms</h3><p>To obtain a matrix that transforms from world to an object’s local space, get
the inverse of the object’s world matrix.</p>
<figure class="highlight js"><table><tr><td class="code"><pre><div class="line"><span class="keyword">var</span> worldToLocal = <span class="keyword">new</span> THREE.Matrix4().getInverse(object3D.matrixWorld)</div></pre></td></tr></table></figure>
<p>Then we can apply that <code>worldToLocal</code> matrix to anything we want to transform:</p>
<figure class="highlight js"><table><tr><td class="code"><pre><div class="line">anotherObject3D.applyMatrix(worldToLocal);</div></pre></td></tr></table></figure>

    

    <!-- Previous / Next navigation. -->
    <footer class="footer guide-links c">
      
        <span class="float-left">
          <a href="/docs/master/introduction/javascript-events-dom-apis.html" class="guide-link guide-link-left">← JavaScript, Events, DOM APIs </a></span>
      
      
        <span class="float-right">
          <a href="/docs/master/introduction/writing-a-component.html" class="guide-link guide-link-right">Writing a Component →</a></span>
      
    </footer>

    <!--
	<footer class="footer footnote">
	  <p>Caught a mistake or want to contribute to the documentation? <br><br> <a href="https://github.com/techsummer/techsummer-site-master/edit/master/docs/introduction/developing-with-threejs.md" class="github-file-link" target="_blank" rel="external">Suggest an edit to this page on GitHub</a></p>
	</footer>
-->

  </div>
</div>

    </main>
    <script src="/js/common.js"></script>
    <script src="/js/ga.js"></script>
    <script src="/js/single-page.js"></script>
    
    
      <script src="/js/docs.js"></script>
    
  </body>
</html>
